<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="QuantumVault - Enterprise Post-Quantum Security Platform">
  <title>QuantumVault - Enterprise PQC Security | Dytallix</title>
  <link rel="stylesheet" href="../shared-assets/styles.css">
  
  <!-- PQC Libraries -->
  <!-- BLAKE3 Hashing via noble-hashes -->
  <script type="module">
    // Import BLAKE3 from the ESM build of noble-hashes
    import { blake3 } from 'https://cdn.jsdelivr.net/npm/@noble/hashes@1.3.3/esm/blake3.js';
    window.nobleBlake3 = blake3;
  </script>
  
  <style>
    .accordion-header {
      cursor: pointer;
      padding: 1rem;
      background: rgba(18, 30, 50, 0.9);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all var(--transition-fast);
      color: var(--text-secondary);
    }
    .accordion-header:hover {
      background: rgba(124, 135, 255, 0.14);
      color: var(--text-primary);
    }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      padding: 0 1rem;
      color: var(--text-muted);
    }
    .accordion-item {
      background: rgba(13, 22, 38, 0.92);
      border-radius: var(--radius-lg);
      border: 1px solid var(--surface-border);
      box-shadow: 0 16px 32px -24px rgba(3, 9, 20, 0.8);
    }
    .accordion-item.active .accordion-content {
      padding: 1rem;
      max-height: 500px;
    }
    
    /* Alternating section backgrounds */
    .section.theme-dark {
      background: linear-gradient(180deg, rgba(8, 14, 27, 0.96) 0%, rgba(4, 9, 18, 0.98) 100%);
      box-shadow: inset 0 1px 0 rgba(12, 20, 35, 0.55), inset 0 -1px 0 rgba(2, 6, 14, 0.7);
    }
    
    .section.theme-light {
      background: linear-gradient(180deg, rgba(20, 31, 49, 0.92) 0%, rgba(29, 44, 72, 0.94) 38%, rgba(18, 28, 48, 0.92) 100%);
      box-shadow: inset 0 1px 0 rgba(64, 90, 130, 0.28), inset 0 -1px 0 rgba(3, 7, 16, 0.65);
    }
    
    /* Carousel improvements */
    .carousel-track {
      position: relative;
      min-height: 620px;
    }
    
    .carousel-slide {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 2.75rem 1.75rem;
      background: rgba(18, 30, 50, 0.6);
      border-radius: var(--radius-lg);
      border: 1px solid var(--surface-border);
      min-height: var(--slide-min-height);
      max-height: none;
      overflow: visible;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .carousel-slide.is-active {
      opacity: 1;
      visibility: visible;
      position: relative;
    }
    
    .slide-badge {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: var(--radius-md);
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      letter-spacing: 0.5px;
    }
    
    .slide-title {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text-primary);
    }
    
    .slide-points {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 1rem;
    }
    
    .slide-points li {
      padding-left: 1.75rem;
      position: relative;
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-secondary);
    }
    
    .slide-points li::before {
      content: "‚Üí";
      position: absolute;
      left: 0;
      color: var(--primary-blue);
      font-weight: 700;
    }
    
    .carousel-footer {
      margin-top: 2.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .carousel-controls {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    
    .carousel-btn {
      padding: 0.75rem 1.5rem;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      transition: all var(--transition-fast);
      font-weight: 500;
    }
    
    .carousel-btn:hover:not(:disabled) {
      background: rgba(99, 102, 241, 0.2);
      border-color: var(--primary-blue);
    }
    
    .carousel-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .carousel-counter {
      font-size: 0.95rem;
      color: var(--text-muted);
      font-weight: 500;
    }
    
    .carousel-dots {
      display: flex;
      gap: 0.75rem;
    }
    
    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(99, 102, 241, 0.3);
      border: none;
      cursor: pointer;
      transition: all var(--transition-fast);
      padding: 0;
    }
    
    .carousel-dot.is-active {
      background: var(--primary-blue);
      transform: scale(1.2);
    }
    
    .carousel-dot:hover {
      background: rgba(99, 102, 241, 0.6);
    }

    /* Button hierarchy for workflow steps */
    .slide-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    /* Primary action - always prominent */
    .slide-actions .btn-primary {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.875rem 1.75rem;
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      transition: all 0.3s ease;
    }

    .slide-actions .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .slide-actions .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Secondary actions - subtle until needed */
    .slide-actions .btn-outline,
    .slide-actions .btn-secondary {
      background: rgba(18, 30, 50, 0.6);
      border: 1px solid var(--surface-border);
      color: var(--text-secondary);
      padding: 0.875rem 1.75rem;
      transition: all 0.3s ease;
    }

    .slide-actions .btn-outline:disabled,
    .slide-actions .btn-secondary:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    /* "Next action" state - highlighted when enabled after primary action completes */
    .slide-actions .btn-next-action:not(:disabled) {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      border: none;
      color: white;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
      animation: pulse-glow 2s ease-in-out infinite;
    }

    .slide-actions .btn-next-action:not(:disabled):hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(34, 197, 94, 0.5);
    }

    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
      }
      50% {
        box-shadow: 0 4px 16px rgba(34, 197, 94, 0.6), 0 0 20px rgba(34, 197, 94, 0.3);
      }
    }

    /* Download button - tertiary action, minimal until enabled */
    .slide-actions .btn-download {
      background: transparent;
      border: 1px solid rgba(124, 135, 255, 0.3);
      color: var(--text-muted);
      padding: 0.75rem 1.5rem;
      font-size: 0.9rem;
    }

    .slide-actions .btn-download:not(:disabled):hover {
      border-color: var(--primary-blue);
      color: var(--text-secondary);
      background: rgba(99, 102, 241, 0.1);
    }

    .slide-actions .btn-download:disabled {
      opacity: 0.2;
      cursor: not-allowed;
    }

    /* Alternating backgrounds for slides */
    :root {
      /* existing vars may be here */
      --slide-bg-dark: rgba(12, 20, 34, 0.9);
      --slide-bg-light: rgba(20, 30, 50, 0.55);
    }

    /* Override slide background to alternate by order */
    .step-carousel .carousel-slide {
      background: var(--slide-bg-dark);
    }
    .step-carousel .carousel-slide:nth-of-type(even) {
      background: var(--slide-bg-light);
    }

    /* Standardize inner content sizing */
    :root {
      --slide-inner-max: 780px;
      --slide-min-height: 580px;
    }

    .slide-inner {
      width: 100%;
      max-width: var(--slide-inner-max);
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
      flex: 1;
    }

    .slide-inner > * {
      width: 100%;
    }

    .slide-actions {
      margin-top: auto;
      text-align: center;
      padding-top: 1rem;
    }

    .quantumvault-card {
      background: linear-gradient(180deg, rgba(18, 30, 50, 0.85), rgba(11, 19, 34, 0.92));
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-xl);
      box-shadow: 0 18px 40px -22px rgba(8, 15, 35, 0.75);
      padding: clamp(1.75rem, 2.5vw, 2.5rem);
    }

    .quantumvault-status {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.75rem;
    }

    .status-pill {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.65rem 1rem;
      border-radius: var(--radius-lg);
      border: 1px solid rgba(124, 135, 255, 0.25);
      background: rgba(12, 19, 33, 0.7);
      min-width: 210px;
      transition: border-color var(--transition-fast), background var(--transition-fast), transform var(--transition-fast);
    }

    .status-pill .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(124, 135, 255, 0.4);
      box-shadow: 0 0 10px rgba(124, 135, 255, 0.45);
    }

    .status-pill .status-text {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      font-size: 0.72rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .status-pill .status-value {
      font-size: 0.92rem;
      font-weight: 600;
      color: var(--text-secondary);
      letter-spacing: normal;
      text-transform: none;
    }

    .status-pill.is-online {
      border-color: rgba(34, 197, 94, 0.45);
      background: rgba(34, 197, 94, 0.12);
    }

    .status-pill.is-online .status-dot {
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.6);
    }

    .status-pill.is-offline {
      border-color: rgba(239, 68, 68, 0.5);
      background: rgba(239, 68, 68, 0.12);
    }

    .status-pill.is-offline .status-dot {
      background: #ef4444;
      box-shadow: 0 0 12px rgba(239, 68, 68, 0.6);
    }

    .slide-subtitle {
      font-size: 0.95rem;
      color: var(--text-muted);
      text-align: center;
      margin: 0 auto 1.5rem;
      max-width: 560px;
    }



    .anchor-panel {
      background: rgba(13, 22, 38, 0.45);
      border: 1px solid rgba(124, 135, 255, 0.25);
      border-radius: var(--radius-lg);
      padding: 1.3rem;
      display: grid;
      gap: 1rem;
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.78rem;
      font-weight: 600;
      padding: 0.4rem 0.8rem;
      border-radius: var(--radius-full);
      background: rgba(124, 135, 255, 0.2);
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .status-badge.is-pending {
      background: rgba(250, 204, 21, 0.18);
      color: #facc15;
    }

    .status-badge.is-success {
      background: rgba(34, 197, 94, 0.18);
      color: #22c55e;
    }

    .anchor-summary {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .anchor-details {
      display: none;
      gap: 0.75rem;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .anchor-details > div {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      background: rgba(9, 16, 28, 0.6);
      padding: 0.6rem 0.75rem;
      border-radius: var(--radius-md);
      border: 1px solid rgba(124, 135, 255, 0.2);
      font-family: var(--font-mono);
      color: var(--text-secondary);
    }

    .code-block {
      background: rgba(9, 16, 28, 0.75);
      border: 1px solid rgba(124, 135, 255, 0.22);
      border-radius: var(--radius-lg);
      padding: 1rem;
      font-family: var(--font-mono);
      font-size: 0.78rem;
      color: var(--text-secondary);
      max-height: 220px;
      overflow-y: auto;
    }

    .result-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      padding: 0.5rem 0.85rem;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.85rem;
      border: 1px solid rgba(124, 135, 255, 0.28);
      color: var(--text-secondary);
      background: rgba(13, 22, 38, 0.55);
    }

    .result-badge.is-success {
      border-color: rgba(34, 197, 94, 0.45);
      background: rgba(34, 197, 94, 0.18);
      color: #22c55e;
    }

    .result-badge.is-danger {
      border-color: rgba(239, 68, 68, 0.45);
      background: rgba(239, 68, 68, 0.18);
      color: #ef4444;
    }

    .verification-inputs {
      display: grid;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .verification-inputs label {
      font-size: 0.82rem;
      color: var(--text-muted);
      display: block;
      margin-bottom: 0.35rem;
    }

    .verification-inputs input[type="file"] {
      width: 100%;
      background: rgba(9, 16, 28, 0.7);
      border: 1px solid rgba(124, 135, 255, 0.3);
      border-radius: var(--radius-md);
      padding: 0.6rem;
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .verification-details {
      display: grid;
      gap: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .verification-details code {
      font-family: var(--font-mono);
      color: var(--text-secondary);
    }
    /* Keep file drop zone and other blocks responsive */
    .file-drop-zone,
    #selectedFilesList,
    #pqcStatus,
    #encryptionStatus,
    #passwordPrompt,
    #hashOutput,
    #encryptionDetails {
      box-sizing: border-box;
    }

    /* File Drop Zone Styles */
    .file-drop-zone {
      border: 2px dashed var(--surface-border);
      border-radius: var(--radius-lg);
      padding: 2.5rem 2rem;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-fast);
      background: rgba(13, 22, 38, 0.4);
      position: relative;
      min-height: 240px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      overflow: hidden;
    }
    
    .file-drop-zone:hover {
      border-color: var(--primary-blue);
      background: rgba(99, 102, 241, 0.05);
    }
    
    .file-drop-zone.drag-over {
      border-color: var(--primary-blue);
      background: rgba(99, 102, 241, 0.1);
      border-style: solid;
    }
    
    .file-drop-zone.drag-over .drop-zone-content {
      display: none;
    }
    
    .file-drop-zone.drag-over .drop-zone-active {
      display: flex !important;
    }
    
    .drop-zone-content,
    .drop-zone-active {
      pointer-events: none;
    }

    .drop-zone-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
    }

    .drop-zone-active {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
    }

    @media (max-width: 768px) {
      .carousel-track {
        min-height: unset;
      }

      .carousel-slide {
        min-height: 0;
        padding: 2.25rem 1.5rem;
      }

      .slide-inner {
        max-width: 100%;
        gap: 1rem;
      }

      .file-drop-zone {
        min-height: 200px;
        padding: 2rem 1.5rem;
      }
    }
    
    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      background: rgba(18, 30, 50, 0.6);
      border: 1px solid var(--surface-border);
      border-radius: var(--radius-md);
      font-size: 0.875rem;
      transition: all var(--transition-fast);
    }
    
    .file-item:hover {
      background: rgba(18, 30, 50, 0.8);
      border-color: var(--primary-blue);
    }
    
    .file-item-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex: 1;
      min-width: 0;
    }
    
    .file-item-name {
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .file-item-size {
      color: var(--text-muted);
      font-size: 0.75rem;
      white-space: nowrap;
    }
    
    .file-item-remove {
      padding: 0.25rem 0.5rem;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: var(--radius-sm);
      color: #ef4444;
      cursor: pointer;
      font-size: 0.75rem;
      transition: all var(--transition-fast);
      pointer-events: auto;
    }
    
    .file-item-remove:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="global-header">
    <div class="container">
      <div class="header-content">
        <a href="../homepage/index.html" class="logo">
          <img src="../shared-assets/logo.svg" alt="Dytallix Logo">
          <span>Dytallix</span>
        </a>
        <nav>
          <ul class="nav-menu">
            <li><a href="../homepage/index.html">Home</a></li>
            <li><a href="../build/index.html">Build</a></li>
            <li><a href="./index.html" class="active">QuantumVault</a></li>
            <li><a href="../build/docs.html">Docs</a></li>
            <li><a href="#demo" class="btn btn-primary" style="padding: 0.5rem 1rem;">Request Demo</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- 1. Hero Section -->
  <section id="hero" class="page-hero is-dark">
    <div class="container page-hero-content">
      <div style="max-width: 900px; margin: 0 auto; text-align: center;">
        <h1 class="hero-title">
          QuantumVault
        </h1>
        <p class="hero-subtitle" style="color: rgba(226, 232, 240, 0.85); margin-bottom: 2rem;">
          PQC-Compliant Blockchain Security Platform
        </p>
        
        <!-- Video moved to The Quantum Threat section -->
        
        <!-- CTAs -->
        <div class="hero-actions">
          <a href="#quantumvault-demo" class="btn btn-large btn-outline" aria-label="Protect your data now with QuantumVault">
            Protect Your Data Now
          </a>
          <a href="#whitepaper" class="btn btn-large btn-outline" 
             onclick="Dytallix.Analytics.trackDownload('whitepaper')">
            Get White Paper
          </a>
        </div>
        
        <!-- Trust Badges -->
        <div style="display: flex; justify-content: center; gap: 2rem; margin-top: 3rem; flex-wrap: wrap;">
          <div style="text-align: center;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèõÔ∏è</div>
            <div style="font-size: 0.875rem; opacity: 0.9;">Regulated Industries</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üîÑ</div>
            <div style="font-size: 0.875rem; opacity: 0.9;">Crypto-Agile</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚úÖ</div>
            <div style="font-size: 0.875rem; opacity: 0.9;">NIST PQC Aligned</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 2. Threat Brief Section -->
  <section id="threat" class="section theme-light">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">The Quantum Threat</h2>
        
      </div>
      
      <!-- Video Placeholder (moved from hero) -->
      <div style="background: rgba(15, 23, 42, 0.45); border-radius: var(--radius-xl); padding: 2rem; margin-bottom: 2rem; border: 1px solid rgba(99, 102, 241, 0.25);">
        <div style="aspect-ratio: 16/9; background: rgba(17, 24, 39, 0.7); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; position: relative;">
          <div style="text-align: center;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">‚ñ∂Ô∏è</div>
            <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Harvest Now, Decrypt Later</div>
            <div style="font-size: 0.875rem; opacity: 0.7;">2 minute explainer video</div>
          </div>
        </div>
      </div>
      
      <div class="grid grid-2" style="margin-bottom: 3rem;">
        <div>
          <div class="card">
            <h3 class="card-title">‚ö†Ô∏è The Attack is Already Happening</h3>
            <p class="card-content">
              Nation-state adversaries and sophisticated attackers are storing encrypted data today with the 
              intent to decrypt it once quantum computers become available. Your sensitive information‚Äîfinancial 
              records, health data, trade secrets‚Äîis at risk right now.
            </p>
          </div>
        </div>
        <div>
          <div class="card">
            <h3 class="card-title">‚è∞ The Quantum Timeline</h3>
            <p class="card-content">
              Experts predict cryptographically relevant quantum computers within 5-10 years. The migration 
              to post-quantum cryptography can take 3-5 years. Organizations must start their transition now 
              to protect long-lived data.
            </p>
          </div>
        </div>
      </div>
      
      <!-- Interactive Timeline -->
      <div class="card" style="margin-bottom: 2rem;">
        <h3 class="card-title">HNDL Attack Timeline</h3>
        <div style="position: relative; padding: 2rem 0;">
          <div style="position: absolute; top: 50%; left: 0; right: 0; height: 4px; background: rgba(124, 135, 255, 0.2);"></div>
          <div style="display: flex; justify-content: space-between; gap: 1rem; position: relative;">
            <!-- 1. Today -->
            <div style="text-align: center; flex: 1;">
              <div style="width: 60px; height: 60px; background: var(--danger-red); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                Today
              </div>
              <div style="font-weight: 700; margin-bottom: 0.5rem;">HNDL Is Happening</div>
              <div style="font-size: 0.875rem; color: var(--text-muted);">
                Adversaries actively harvest encrypted data
              </div>
            </div>

            <!-- 2. Invest Now (Next 12‚Äì18m) -->
            <div style="text-align: center; flex: 1;">
              <div style="width: 60px; height: 60px; background: var(--primary-blue); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                12‚Äì18m
              </div>
              <div style="font-weight: 700; margin-bottom: 0.5rem;">Invest Now</div>
              <div style="font-size: 0.875rem; color: var(--text-muted);">
                Inventory, plan, and start PQC migration to avoid the quantum cliff
              </div>
            </div>

            <!-- 3. Quantum Arrives (3‚Äì5y) -->
            <div style="text-align: center; flex: 1;">
              <div style="width: 60px; height: 60px; background: var(--warning-amber); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                3‚Äì5y
              </div>
              <div style="font-weight: 700; margin-bottom: 0.5rem;">Quantum Arrives</div>
              <div style="font-size: 0.875rem; color: var(--text-muted);">
                CRQC threatens classical crypto and legacy keys
              </div>
            </div>

            <!-- 4. Ready (PQC‚ÄëProtected & Compliant) -->
            <div style="text-align: center; flex: 1;">
              <div style="width: 60px; height: 60px; background: var(--success-green); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                Ready
              </div>
              <div style="font-weight: 700; margin-bottom: 0.5rem;">PQC‚ÄëProtected & Compliant</div>
              <div style="font-size: 0.875rem; color: var(--text-muted);">
                Hybrid PQC deployed, attestations in place, audits pass
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Accordion FAQ -->
      <div class="card">
        <h3 class="card-title">FAQ: How Quantum Attacks Work</h3>
        <div>
          <div class="accordion-item" style="margin-bottom: 1rem;">
            <div class="accordion-header">
              <span><strong>What is a Cryptographically Relevant Quantum Computer (CRQC)?</strong></span>
              <span>+</span>
            </div>
            <div class="accordion-content">
              <p>A CRQC is a quantum computer powerful enough to break current encryption standards like RSA and ECC. 
              It requires millions of stable qubits and will likely emerge within the next decade.</p>
            </div>
          </div>
          
          <div class="accordion-item" style="margin-bottom: 1rem;">
            <div class="accordion-header">
              <span><strong>Why should I act now if quantum computers aren't here yet?</strong></span>
              <span>+</span>
            </div>
            <div class="accordion-content">
              <p>Because adversaries are already harvesting encrypted data today. If your data has long-term value 
              (financial records, health data, IP), it's vulnerable. The migration to PQC takes years, so starting 
              now ensures you're protected before quantum computers arrive.</p>
            </div>
          </div>
          
          <div class="accordion-item">
            <div class="accordion-header">
              <span><strong>What data is most at risk?</strong></span>
              <span>+</span>
            </div>
            <div class="accordion-content">
              <p>Any data that must remain confidential for 5+ years: financial transactions, healthcare records, 
              government communications, trade secrets, personal identity information, and encrypted backups.</p>
            </div>
          </div>
        </div>
        
        <div style="margin-top: 1.5rem; text-align: center;">
          <a href="#whitepaper" class="btn btn-outline" onclick="Dytallix.Analytics.trackDownload('whitepaper')">
            Download Technical White Paper ‚Üí
          </a>
        </div>
      </div>
  </div>
</section>

  <!-- QuantumVault Interactive Demo -->
  <section id="quantumvault-demo" class="section theme-dark" data-api-url="http://localhost:3002" data-chain-url="http://localhost:3003">
    <div class="container">
      <div class="section-header" style="text-align: center;">
        <h2 class="section-title">Try QuantumVault</h2>
        <p style="max-width: 680px; margin: 0 auto; color: var(--text-muted); font-size: 0.95rem;">
          Experience the end-to-end quantum-resilient workflow: encrypt with PQC-grade hashing,
          anchor to the Dytallix blockchain, export an attestation certificate, and verify file integrity in minutes.
        </p>
      </div>

      <div class="card quantumvault-card">
        <div class="quantumvault-status">
          <div class="status-pill" id="statusApiPill">
            <span class="status-dot"></span>
            <div class="status-text">
              <span>QuantumVault API</span>
              <span class="status-value" id="statusApiValue">Checking...</span>
            </div>
          </div>
          <div class="status-pill" id="statusChainPill">
            <span class="status-dot"></span>
            <div class="status-text">
              <span>Dytallix Chain</span>
              <span class="status-value" id="statusChainValue">Checking...</span>
            </div>
          </div>
          <button type="button" class="btn btn-outline btn-sm" id="refreshStatusBtn">Refresh Status</button>
        </div>

        <div class="step-carousel" data-step-carousel>
          <div class="carousel-track">
            <article class="carousel-slide is-active" aria-hidden="false">
              <span class="slide-badge">Step 1 Select File</span>
              <div class="slide-inner">
                <p class="slide-subtitle">
                  Select the file you need to protect. All processing happens locally in your browser - nothing is uploaded to any server.
                </p>

                <div class="file-drop-zone" id="fileDropZone">
                  <input type="file" id="fileInput" multiple hidden>
                  <div class="drop-zone-content">
                    <div style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.6;">üìÅ</div>
                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">
                      Drag &amp; drop files here
                    </div>
                    <div style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: 1rem;">
                      or click to browse
                    </div>
                    <button type="button" class="btn btn-outline btn-sm" onclick="document.getElementById('fileInput').click()">
                      Select Files
                    </button>
                  </div>
                  <div class="drop-zone-active" style="display: none;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚¨áÔ∏è</div>
                    <div style="font-size: 1.1rem; font-weight: 600;">Drop files here</div>
                  </div>
                </div>

                <div id="selectedFilesList" style="display: none;">
                  <div style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--text-secondary);">
                    Selected files:
                  </div>
                  <div id="filesContainer" style="display: grid; gap: 0.5rem; max-height: 150px; overflow-y: auto;"></div>
                </div>

                <div class="slide-actions">
                  <button type="button" class="btn btn-primary" onclick="document.querySelector('[data-carousel-dot=&quot;1&quot;]').click()">
                    Continue to Encryption ‚Üí
                  </button>
                </div>
              </div>
            </article>

            <article class="carousel-slide" aria-hidden="true">
              <span class="slide-badge">Step 2 ‚Ä¢ Encrypt & Hash</span>
              <div class="slide-inner">
                <p class="slide-subtitle">
                  Generate a BLAKE3 digest and wrap your data with AES-256-GCM. All cryptography runs locally with zero-knowledge guarantees.
                </p>

                <div id="pqcStatus" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: var(--radius-md); padding: 0.875rem; text-align: center;">
                  <div style="font-size: 0.875rem; color: var(--text-secondary);">
                    <strong style="color: #22c55e;">‚úì Cryptography:</strong>
                    <span id="pqcAlgorithms">Loading...</span>
                  </div>
                </div>

                <div id="encryptionStatus" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: var(--radius-md); padding: 0.75rem; display: none;">
                  <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                    <div id="encryptionSpinner" style="width: 20px; height: 20px; border: 2px solid rgba(99, 102, 241, 0.3); border-top-color: var(--primary-blue); border-radius: 50%; animation: spin 0.8s linear infinite;"></div>
                    <div id="encryptionMessage" style="font-size: 0.875rem; font-weight: 600; color: var(--text-primary);"></div>
                  </div>
                  <div style="background: rgba(13, 22, 38, 0.6); border-radius: var(--radius-sm); height: 8px; overflow: hidden;">
                    <div id="encryptionProgress" style="height: 100%; background: linear-gradient(90deg, var(--primary-blue), #764ba2); width: 0%; transition: width 0.3s ease;"></div>
                  </div>
                </div>

                <div id="passwordPrompt">
                  <label style="display: block; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-secondary);">
                    Encryption password *
                  </label>
                  <input
                    type="password"
                    id="encryptionPassword"
                    placeholder="Enter a strong password"
                    style="width: 100%; padding: 0.75rem; background: rgba(13, 22, 38, 0.6); border: 1px solid var(--surface-border); border-radius: var(--radius-md); color: var(--text-primary); font-size: 0.875rem; margin-bottom: 0.5rem;"
                  />
                  <div style="font-size: 0.7rem; color: var(--text-muted);">
                    üîí Zero-knowledge: your password never leaves your device.
                  </div>
                </div>

                <div id="hashOutput" style="display: none;">
                  <div style="font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-secondary);">
                    BLAKE3 hash:
                  </div>
                  <div style="background: rgba(13, 22, 38, 0.6); border: 1px solid var(--surface-border); border-radius: var(--radius-md); padding: 0.5rem; font-family: monospace; font-size: 0.7rem; color: var(--primary-blue); word-break: break-all;">
                    <span id="hashValue"></span>
                  </div>
                </div>

                <div id="encryptionDetails" style="display: none;">
                  <div style="font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-secondary);">
                    Cryptographic details:
                  </div>
                  <div style="display: grid; gap: 0.35rem; font-size: 0.7rem;">
                    <div style="background: rgba(13, 22, 38, 0.4); padding: 0.4rem 0.5rem; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                      <span style="color: var(--text-muted);">Hash algorithm:</span>
                      <span style="color: #22c55e; font-weight: 600;" id="hashAlgorithm">BLAKE3 (PQC)</span>
                    </div>
                    <div style="background: rgba(13, 22, 38, 0.4); padding: 0.4rem 0.5rem; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                      <span style="color: var(--text-muted);">Encryption:</span>
                      <span style="color: var(--text-primary); font-weight: 600;">AES-256-GCM</span>
                    </div>
                    <div style="background: rgba(13, 22, 38, 0.4); padding: 0.4rem 0.5rem; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                      <span style="color: var(--text-muted);">Key derivation:</span>
                      <span style="color: var(--text-primary); font-weight: 600;">PBKDF2-SHA256</span>
                    </div>
                    <div style="background: rgba(13, 22, 38, 0.4); padding: 0.4rem 0.5rem; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                      <span style="color: var(--text-muted);">Iterations:</span>
                      <span style="color: var(--text-primary); font-weight: 600;" id="iterationsValue">100,000</span>
                    </div>
                    <div style="background: rgba(13, 22, 38, 0.4); padding: 0.4rem 0.5rem; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                      <span style="color: var(--text-muted);">Encrypted size:</span>
                      <span style="color: var(--text-primary); font-weight: 600;" id="encryptedSize">-</span>
                    </div>
                  </div>
                </div>

                <div class="slide-actions">
                  <button type="button" id="encryptHashBtn" class="btn btn-primary" onclick="performEncryptionAndHashing()">
                    üîê Encrypt &amp; hash file
                  </button>
                  <button type="button" id="nextToAnchorBtn" class="btn btn-secondary btn-next-action" disabled onclick="document.querySelector('[data-carousel-dot=&quot;2&quot;]').click()">
                    Continue to anchor ‚Üí
                  </button>
                </div>
              </div>
            </article>

            <article class="carousel-slide" aria-hidden="true">
              <span class="slide-badge">Step 3 ‚Ä¢ Anchor &amp; Attest</span>
              <div class="slide-inner">
                <p class="slide-subtitle">
                  Commit the proof hash to the Dytallix blockchain for an immutable audit trail and compliance-grade timestamping.
                </p>

                <div class="anchor-panel">
                  <span id="anchorStatusBadge" class="status-badge">Awaiting encrypted proof</span>
                  <div class="anchor-summary" id="anchorSummary">
                    Complete Step 2 to enable blockchain anchoring.
                  </div>
                  <div class="anchor-details" id="anchorDetails">
                    <div><span>Transaction</span><span id="anchorTxHash">‚Äî</span></div>
                    <div><span>Block</span><span id="anchorBlock">‚Äî</span></div>
                    <div><span>Timestamp</span><span id="anchorTimestamp">‚Äî</span></div>
                  </div>
                </div>

                <div class="slide-actions">
                  <button type="button" class="btn btn-primary" id="anchorProofBtn">
                    Anchor proof on Dytallix
                  </button>
                  <button type="button" class="btn btn-secondary btn-next-action" id="anchorNextBtn" disabled onclick="document.querySelector('[data-carousel-dot=&quot;3&quot;]').click()">
                    Continue to certificate ‚Üí
                  </button>
                </div>
              </div>
            </article>

            <article class="carousel-slide" aria-hidden="true">
              <span class="slide-badge">Step 4 ‚Ä¢ Generate Certificate</span>
              <div class="slide-inner">
                <p class="slide-subtitle">
                  Package the hash, encryption parameters, and blockchain receipt into a portable JSON attestation.
                </p>

                <div class="anchor-panel">
                  <span id="certificateStatusBadge" class="status-badge">Waiting for anchor</span>
                  <div class="anchor-summary">
                    Shareable attestations let auditors confirm provenance without exposing raw data.
                  </div>
                </div>

                <pre class="code-block" id="certificateOutput" aria-live="polite">Generate an attestation to view the JSON payload...</pre>

                <div class="slide-actions">
                  <button type="button" class="btn btn-primary" id="generateCertificateBtn">
                    Generate attestation
                  </button>
                  <button type="button" class="btn btn-secondary" id="certificateDownloadBtn" disabled>
                    Download JSON
                  </button>
                  <button type="button" class="btn btn-outline" id="certificateNextBtn" disabled onclick="document.querySelector('[data-carousel-dot=&quot;4&quot;]').click()">
                    Continue to verification ‚Üí
                  </button>
                </div>
              </div>
            </article>

            <article class="carousel-slide" aria-hidden="true">
              <span class="slide-badge">Step 5 ‚Ä¢ Verify &amp; Audit</span>
              <div class="slide-inner">
                <p class="slide-subtitle">
                  Load any attestation and candidate file to confirm integrity, anchoring details, and storage policy in seconds.
                </p>

                <div class="result-badge" id="verificationResult">Awaiting inputs</div>

                <div class="verification-inputs">
                  <div>
                    <label for="verificationCertificateInput">Attestation (.json)</label>
                    <input type="file" id="verificationCertificateInput" accept="application/json">
                    <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.3rem;">
                      Leave empty to use the attestation generated in Step 4.
                    </div>
                  </div>
                  <div>
                    <label for="verificationFileInput">Original file to verify</label>
                    <input type="file" id="verificationFileInput">
                  </div>
                </div>

                <div class="verification-details" id="verificationDetails">
                  <div><span>Expected hash:</span> <code>‚Äî</code></div>
                  <div><span>Computed hash:</span> <code>‚Äî</code></div>
                  <div><span>Anchor tx:</span> <code>‚Äî</code></div>
                </div>

                <div class="slide-actions">
                  <button type="button" class="btn btn-primary" id="runVerificationBtn">
                    Run verification
                  </button>
                  <button type="button" class="btn btn-outline" onclick="document.querySelector('[data-carousel-dot=&quot;0&quot;]').click()">
                    ‚Üê Restart workflow
                  </button>
                </div>
              </div>
            </article>
          </div>

          <footer class="carousel-footer">
            <div class="carousel-dots" role="tablist" style="justify-content: center; margin: 0 auto;">
              <button class="carousel-dot is-active" data-carousel-dot="0" aria-label="Upload &amp; Storage"></button>
              <button class="carousel-dot" data-carousel-dot="1" aria-label="Encrypt &amp; Hash"></button>
              <button class="carousel-dot" data-carousel-dot="2" aria-label="Anchor &amp; Attest"></button>
              <button class="carousel-dot" data-carousel-dot="3" aria-label="Generate Certificate"></button>
              <button class="carousel-dot" data-carousel-dot="4" aria-label="Verify &amp; Audit"></button>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </section>

  <!-- 3. Solution Overview Section -->
  <section id="solution" class="section theme-light">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">How QuantumVault Works</h2>
      </div>
      
      <!-- Animated Flow (wider with added detail) -->
      <div style="max-width: 1200px; margin: 0 auto 3rem;">
        <div style="display: flex; gap: 1rem; align-items: stretch; position: relative;">
          <div style="position: absolute; top: calc(50% - 1px); left: 2%; right: 2%; height: 2px; background: rgba(99,102,241,0.35); z-index: 0;"></div>
          
          <article class="card" style="flex: 1; margin: 0; position: relative; z-index: 1; padding: 1.5rem 1.75rem; min-height: 260px;">
            <div style="font-size: 2rem; text-align: center; margin-bottom: 0.5rem;">üîç</div>
            <h4 style="text-align: center; margin-bottom: 0.5rem;">1. Identify</h4>
            <p style="text-align: center; font-size: 0.95rem; color: var(--text-muted); margin-bottom: .5rem;">Discover vulnerable cryptographic assets</p>
            <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem; font-size: .95rem;">
              <li>‚Ä¢ Scan certificates, APIs, data stores</li>
              <li>‚Ä¢ Inventory RSA/ECC usage, TLS versions, key lengths</li>
              <li>‚Ä¢ Detect long‚Äëlived and HNDL‚Äësensitive data</li>
              <li>‚Ä¢ Map third‚Äëparty and library dependencies</li>
            </ul>
          </article>
          
          <article class="card" style="flex: 1; margin: 0; position: relative; z-index: 1; padding: 1.5rem 1.75rem; min-height: 260px;">
            <div style="font-size: 2rem; text-align: center; margin-bottom: 0.5rem;">üìä</div>
            <h4 style="text-align: center; margin-bottom: 0.5rem;">2. Classify</h4>
            <p style="text-align: center; font-size: 0.95rem; color: var(--text-muted); margin-bottom: .5rem;">Prioritize based on risk and value</p>
            <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem; font-size: .95rem;">
              <li>‚Ä¢ Tag by sensitivity and business owner</li>
              <li>‚Ä¢ Risk scoring = exposure √ó data lifetime</li>
              <li>‚Ä¢ Regulatory mapping (HIPAA, GDPR, FedRAMP)</li>
              <li>‚Ä¢ Queue quick wins vs. deep refactors</li>
            </ul>
          </article>
          
          <article class="card" style="flex: 1; margin: 0; position: relative; z-index: 1; padding: 1.5rem 1.75rem; min-height: 260px;">
            <div style="font-size: 2rem; text-align: center; margin-bottom: 0.5rem;">üõ°Ô∏è</div>
            <h4 style="text-align: center; margin-bottom: 0.5rem;">3. Protect</h4>
            <p style="text-align: center; font-size: 0.95rem; color: var(--text-muted); margin-bottom: .5rem;">Migrate to quantum‚Äëresistant encryption</p>
            <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem; font-size: .95rem;">
              <li>‚Ä¢ Hybrid classical + PQC rollout</li>
              <li>‚Ä¢ Automated re‚Äëwrap of historical data</li>
              <li>‚Ä¢ Client‚Äëside encryption and key isolation</li>
              <li>‚Ä¢ Scheduled rotation and recovery playbooks</li>
            </ul>
          </article>
          
          <article class="card" style="flex: 1; margin: 0; position: relative; z-index: 1; padding: 1.5rem 1.75rem; min-height: 260px;">
            <div style="font-size: 2rem; text-align: center; margin-bottom: 0.5rem;">‚úÖ</div>
            <h4 style="text-align: center; margin-bottom: 0.5rem;">4. Prove</h4>
            <p style="text-align: center; font-size: 0.95rem; color: var(--text-muted); margin-bottom: .5rem;">Demonstrate compliance & security</p>
            <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem; font-size: .95rem;">
              <li>‚Ä¢ Chain‚Äëanchored attestations and timestamps</li>
              <li>‚Ä¢ Tamper‚Äëevident audit trail and scheduled reports</li>
              <li>‚Ä¢ API/webhooks for SIEM and GRC tools</li>
              <li>‚Ä¢ Real‚Äëtime dashboards; export CSV/PDF</li>
            </ul>
          </article>
        </div>
      </div>
      
      <div style="text-align: center;">
        <a href="#features" class="btn btn-primary btn-large">See It in Action ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- 4. Feature Grid Section -->
  <section id="features" class="section theme-dark">
    <div class="container" style="max-width: 1280px;">
      <div class="section-header">
        <h2 class="section-title">Key Features</h2>
      </div>
      
      <div class="grid grid-3" style="grid-template-columns: repeat(3, minmax(360px, 1fr)); gap: 2rem;">
        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">üîê Post-Quantum Encryption Enforcement</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Automatically enforce NIST-approved PQC algorithms across your infrastructure. Support for 
            Kyber, Dilithium, SPHINCS+, and Falcon with seamless integration.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Automatic algorithm selection
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Hybrid classical + PQC mode
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Policy-based enforcement
            </li>
          </ul>
        </div>

        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">üîÑ Secure Data Re-Wrapping</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Migrate existing encrypted data from classical to quantum-resistant encryption without 
            decrypting in transit. Zero-downtime migration paths.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Automated re-encryption pipeline
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Batch processing capabilities
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Rollback protection
            </li>
          </ul>
        </div>

        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">üìã Attestation &amp; Audit Trail</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Immutable cryptographic proof of your security posture. Meet compliance requirements with 
            blockchain-based attestation records.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Real-time compliance monitoring
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Tamper-proof audit logs
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Automated reporting
            </li>
          </ul>
        </div>

        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">‚öôÔ∏è Crypto-Agile Framework</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Future-proof your infrastructure with the ability to swap cryptographic algorithms without 
            major code changes. Adapt as standards evolve.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Algorithm abstraction layer
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Multi-algorithm support
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Gradual migration paths
            </li>
          </ul>
        </div>

        <!-- New: Key Management & Rotation -->
        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">üîë Key Management &amp; Rotation</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Centralize key lifecycle with automated rotation, HSM support, and hybrid signatures for
            seamless transitions.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Hardware-backed keys (HSM / WebAuthn)
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Scheduled &amp; event-driven rotation
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Hybrid classical + PQC signatures
            </li>
          </ul>
        </div>

        <!-- New: Monitoring & Alerts -->
        <div class="card" style="padding: 1.75rem;">
          <h3 class="card-title">üìà Monitoring &amp; Alerts</h3>
          <p class="card-content" style="margin-bottom: 1rem;">
            Observe compliance and security posture in real time with rich telemetry and actionable alerts.
          </p>
          <ul style="list-style: none; padding: 0; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì Anomaly detection &amp; baselines
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì SIEM &amp; webhook integrations
            </li>
            <li style="padding: 0.5rem 0; border-top: 1px solid var(--surface-border);">
              ‚úì On-call friendly notifications
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- New: Technology Stack (copied from Build) -->
  <section class="section theme-light">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Tech Stack</h2>
      </div>

      <div class="grid grid-3">
        <article class="card">
          <h4>Post-Quantum Cryptography</h4>
          <p class="card-content">
            NIST-approved Kyber, Dilithium, Falcon, and SPHINCS+ implementations with hybrid classical + PQC
            signature support plus seamless key rotation.
          </p>
          <div class="stacked-list">
            <div class="stacked-list-item">
              <span>Lattice-based primitives</span>
              <span class="badge badge-success">Ready</span>
            </div>
            <div class="stacked-list-item">
              <span>Crypto-agile upgrades</span>
              <span class="badge">Automated</span>
            </div>
          </div>
        </article>

        <article class="card">
          <h4>Rust &amp; WebAssembly Core</h4>
          <p class="card-content">
            Memory-safe execution, deterministic WASM runtime, and zero-cost abstractions deliver consistently
            performant smart contracts across environments.
          </p>
          <div class="stacked-list">
            <div class="stacked-list-item">
              <span>Deterministic WASM runtime</span>
              <span class="badge badge-info">Optimized</span>
            </div>
            <div class="stacked-list-item">
              <span>Zero-cost abstractions</span>
              <span class="badge badge-info">Built-In</span>
            </div>
          </div>
        </article>

        <article class="card">
          <h4>GraphQL &amp; REST APIs</h4>
          <p class="card-content">
            Query chain state with GraphQL subscriptions or traditional REST endpoints. IntelliSense-ready schemas and
            OpenAPI specs keep teams aligned.
          </p>
          <div class="stacked-list">
            <div class="stacked-list-item">
              <span>Real-time subscriptions</span>
              <span class="badge badge-info">Streaming</span>
            </div>
            <div class="stacked-list-item">
              <span>OpenAPI explorer</span>
              <span class="badge badge-info">Interactive</span>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- 7. Demo / Contact Form Section -->
  <section id="demo" class="section bg-gradient-quantum" style="color: white;">
    <div class="container">
      <div style="max-width: 700px; margin: 0 auto;">
        <h2 class="text-light" style="text-align: center; font-size: 2.5rem; margin-bottom: 1rem;">Request a Demo</h2>
        
        <div class="card">
          <form class="demo-form" id="demo-request-form">
            <div class="form-group">
              <label class="form-label">Name *</label>
              <input type="text" name="name" class="form-input" required placeholder="John Doe">
            </div>
            
            <div class="form-group">
              <label class="form-label">Organization *</label>
              <input type="text" name="organization" class="form-input" required placeholder="Acme Corporation">
            </div>
            
            <div class="form-group">
              <label class="form-label">Email *</label>
              <input type="email" name="email" class="form-input" required placeholder="john@acme.com">
            </div>
            
            <div class="form-group">
              <label class="form-label">What type of data concerns you most?</label>
              <select name="data_type" class="form-select">
                <option value="">Select...</option>
                <option value="financial">Financial Records</option>
                <option value="health">Healthcare Data</option>
                <option value="ip">Intellectual Property</option>
                <option value="government">Government Communications</option>
                <option value="personal">Personal Identity Information</option>
                <option value="other">Other</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">Additional Details</label>
              <textarea name="details" class="form-textarea" placeholder="Tell us about your security requirements..."></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary btn-large" style="width: 100%;">
              Request Demo
            </button>
            
            <p style="font-size: 0.75rem; color: var(--text-secondary); text-align: center; margin-top: 1rem;">
              By submitting this form, you agree to our 
              <a href="#" style="color: var(--primary-blue);">Privacy Policy</a>. 
              We'll never share your information.
            </p>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Success Modal -->
  <div id="success-modal" class="modal-overlay modal-hidden">
    <div class="modal-content">
      <h2 style="margin-bottom: 1rem; color: var(--success-green);">‚úì Thank You!</h2>
      <p style="margin-bottom: 1.5rem; color: var(--text-muted);">
        Your demo request has been received. Our team will contact you within 24 hours to schedule your personalized QuantumVault demonstration.
      </p>
      <button class="btn btn-primary" style="width: 100%;" onclick="Dytallix.Modal.close('success-modal')">
        Close
      </button>
    </div>
  </div>

  <!-- 8. Footer -->
  <footer class="global-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>QuantumVault</h4>
          <ul class="footer-links">
            <li><a href="#hero">Overview</a></li>
            <li><a href="#threat">Threat Brief</a></li>
            <li><a href="#solution">Solution</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#demo">Request Demo</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4>Technology</h4>
          <ul class="footer-links">
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#proof">Security Approach</a></li>
            <li><a href="#whitepaper" onclick="Dytallix.Analytics.trackDownload('whitepaper')">White Paper</a></li>
            <li><a href="../build/docs.html">API Documentation</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4>Build on Dytallix</h4>
          <ul class="footer-links">
            <li><a href="../build/index.html">Developer Ecosystem</a></li>
            <li><a href="../build/pqc-wallet.html">PQC Wallet</a></li>
            <li><a href="../build/faucet.html">Testnet Faucet</a></li>
            <li><a href="../build/explorer.html">Blockchain Explorer</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4>Stay Updated</h4>
          <form style="margin-bottom: 1rem;" onsubmit="event.preventDefault(); alert('Newsletter subscription');">
            <input type="email" class="form-input" placeholder="Your email" 
                   style="margin-bottom: 0.5rem; background: rgba(18, 30, 50, 0.85); border-color: var(--surface-border); color: white;">
            <button type="submit" class="btn btn-primary" style="width: 100%;">Subscribe</button>
          </form>
          <ul class="footer-links">
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 Dytallix. All rights reserved. | Securing the Quantum Future</p>
        <p style="font-size: 0.75rem; margin-top: 0.5rem; color: var(--text-muted);">
          QuantumVault is built on NIST-approved post-quantum cryptographic algorithms. This technology is designed 
          to protect against both classical and quantum computer attacks. Dytallix makes no warranties regarding the 
          timeline for quantum computing development or the effectiveness of any cryptographic algorithm against 
          future attack vectors. Organizations should conduct their own risk assessments.
        </p>
      </div>
    </div>
  </footer>

  <script src="../shared-assets/app.js"></script>
  <script>
    (function () {
      var carousels = document.querySelectorAll('[data-step-carousel]');
      if (!carousels.length) {
        return;
      }

      carousels.forEach(function (carousel) {
        var slides = Array.prototype.slice.call(carousel.querySelectorAll('.carousel-slide'));
        if (!slides.length) {
          return;
        }

        var dots = Array.prototype.slice.call(carousel.querySelectorAll('[data-carousel-dot]'));
        var total = slides.length;
        var activeIndex = 0;

        function applyActiveState() {
          slides.forEach(function (slide, index) {
            var isActive = index === activeIndex;
            slide.classList.toggle('is-active', isActive);
            slide.setAttribute('aria-hidden', isActive ? 'false' : 'true');
          });

          dots.forEach(function (dot, index) {
            var isActive = index === activeIndex;
            dot.classList.toggle('is-active', isActive);
            dot.setAttribute('aria-pressed', isActive ? 'true' : 'false');
          });
        }

        function setActive(newIndex) {
          var index = typeof newIndex === 'number' ? newIndex : parseInt(newIndex, 10);
          if (isNaN(index)) {
            return;
          }
          index = Math.min(Math.max(index, 0), total - 1);
          if (index === activeIndex) {
            applyActiveState();
            return;
          }
          activeIndex = index;
          applyActiveState();
        }

        setActive(0);

        dots.forEach(function (dot, index) {
          dot.addEventListener('click', function () {
            setActive(index);
          });
        });
      });
    })();
  </script>
  <script>
    window.QuantumVaultDemo = window.QuantumVaultDemo || {};

    var encryptionState = {
      encrypted: false,
      hash: null,
      encryptedData: null,
      salt: null,
      nonce: null,
      algorithm: 'AES-256-GCM'
    };

    var anchorState = window.QuantumVaultDemo.anchorState || { anchored: false };
    window.QuantumVaultDemo.anchorState = anchorState;

    var certificateState = window.QuantumVaultDemo.certificateState || { data: null };
    window.QuantumVaultDemo.certificateState = certificateState;

    function resetWorkflowState() {
      encryptionState.encrypted = false;
      encryptionState.hash = null;
      encryptionState.encryptedData = null;
      encryptionState.salt = null;
      encryptionState.nonce = null;

      var statusDiv = document.getElementById('encryptionStatus');
      if (statusDiv) {
        statusDiv.style.display = 'none';
      }
      var progress = document.getElementById('encryptionProgress');
      if (progress) progress.style.width = '0%';
      var message = document.getElementById('encryptionMessage');
      if (message) message.textContent = '';
      var spinner = document.getElementById('encryptionSpinner');
      if (spinner) spinner.style.display = 'block';
      var passwordPrompt = document.getElementById('passwordPrompt');
      if (passwordPrompt) passwordPrompt.style.display = 'block';
      var passwordInput = document.getElementById('encryptionPassword');
      if (passwordInput) passwordInput.value = '';
      var encryptBtn = document.getElementById('encryptHashBtn');
      if (encryptBtn) {
        encryptBtn.disabled = false;
        encryptBtn.textContent = 'üîê Encrypt & hash file';
        encryptBtn.classList.remove('btn-secondary');
        encryptBtn.classList.add('btn-primary');
      }
      var nextBtn = document.getElementById('nextToAnchorBtn');
      if (nextBtn) {
        nextBtn.disabled = true;
      }
      var hashOutput = document.getElementById('hashOutput');
      if (hashOutput) hashOutput.style.display = 'none';
      var hashValue = document.getElementById('hashValue');
      if (hashValue) hashValue.textContent = '';
      var details = document.getElementById('encryptionDetails');
      if (details) details.style.display = 'none';
      var encryptedSize = document.getElementById('encryptedSize');
      if (encryptedSize) encryptedSize.textContent = '-';

      anchorState.anchored = false;
      anchorState.txHash = null;
      anchorState.block = null;
      anchorState.timestamp = null;
      anchorState.proofId = null;
      anchorState.hash = null;
      anchorState.file = null;

      var anchorBadge = document.getElementById('anchorStatusBadge');
      if (anchorBadge) {
        anchorBadge.textContent = 'Awaiting encrypted proof';
        anchorBadge.classList.remove('is-success', 'is-pending');
      }
      var anchorSummary = document.getElementById('anchorSummary');
      if (anchorSummary) {
        anchorSummary.textContent = 'Complete Step 2 to enable blockchain anchoring.';
      }
      var anchorDetails = document.getElementById('anchorDetails');
      if (anchorDetails) {
        anchorDetails.style.display = 'none';
      }
      var anchorTx = document.getElementById('anchorTxHash');
      if (anchorTx) anchorTx.textContent = '‚Äî';
      var anchorBlockEl = document.getElementById('anchorBlock');
      if (anchorBlockEl) anchorBlockEl.textContent = '‚Äî';
      var anchorTimestampEl = document.getElementById('anchorTimestamp');
      if (anchorTimestampEl) anchorTimestampEl.textContent = '‚Äî';
      var anchorBtn = document.getElementById('anchorProofBtn');
      if (anchorBtn) {
        anchorBtn.disabled = false;
        anchorBtn.textContent = 'Anchor proof on Dytallix';
        anchorBtn.classList.remove('btn-secondary');
        anchorBtn.classList.add('btn-primary');
      }
      var anchorNextBtn = document.getElementById('anchorNextBtn');
      if (anchorNextBtn) {
        anchorNextBtn.disabled = true;
      }

      certificateState.data = null;
      var certificateBadge = document.getElementById('certificateStatusBadge');
      if (certificateBadge) {
        certificateBadge.textContent = 'Waiting for anchor';
        certificateBadge.classList.remove('is-success');
      }
      var certificateOutput = document.getElementById('certificateOutput');
      if (certificateOutput) {
        certificateOutput.textContent = 'Generate an attestation to view the JSON payload...';
      }
      var generateCertificateBtn = document.getElementById('generateCertificateBtn');
      if (generateCertificateBtn) {
        generateCertificateBtn.disabled = false;
        generateCertificateBtn.textContent = 'Generate attestation';
        generateCertificateBtn.classList.remove('btn-secondary');
        generateCertificateBtn.classList.add('btn-primary');
      }
      var certificateDownloadBtn = document.getElementById('certificateDownloadBtn');
      if (certificateDownloadBtn) {
        certificateDownloadBtn.disabled = true;
        certificateDownloadBtn.classList.remove('btn-primary', 'btn-next-action');
        certificateDownloadBtn.classList.add('btn-secondary');
      }
      var certificateNextBtn = document.getElementById('certificateNextBtn');
      if (certificateNextBtn) {
        certificateNextBtn.disabled = true;
        certificateNextBtn.classList.remove('btn-secondary', 'btn-next-action');
        certificateNextBtn.classList.add('btn-outline');
      }

      var verificationResult = document.getElementById('verificationResult');
      if (verificationResult) {
        verificationResult.textContent = 'Awaiting inputs';
        verificationResult.classList.remove('is-success', 'is-danger');
      }
      var verificationDetails = document.getElementById('verificationDetails');
      if (verificationDetails) {
        verificationDetails.innerHTML =
          '<div><span>Expected hash:</span> <code>‚Äî</code></div>' +
          '<div><span>Computed hash:</span> <code>‚Äî</code></div>' +
          '<div><span>Anchor tx:</span> <code>‚Äî</code></div>';
      }
    }
    window.QuantumVaultDemo.resetWorkflow = resetWorkflowState;

    (function() {
      var section = document.getElementById('quantumvault-demo');
      if (!section) return;

      var apiPill = document.getElementById('statusApiPill');
      var chainPill = document.getElementById('statusChainPill');
      var refreshBtn = document.getElementById('refreshStatusBtn');
      var apiUrl = section.dataset.apiUrl || 'http://localhost:3002';
      var chainUrl = section.dataset.chainUrl || 'http://localhost:3003';

      // Expose for other modules (anchor, etc.)
      window.QuantumVaultDemo = window.QuantumVaultDemo || {};
      window.QuantumVaultDemo.apiUrl = apiUrl;
      window.QuantumVaultDemo.chainUrl = chainUrl;

      function setPill(pill, value, state) {
        if (!pill) return;
        pill.classList.remove('is-online', 'is-offline');
        if (state === 'online') pill.classList.add('is-online');
        if (state === 'offline') pill.classList.add('is-offline');
        var valueEl = pill.querySelector('.status-value');
        if (valueEl && typeof value === 'string') {
          valueEl.textContent = value;
        }
      }

      function fetchWithTimeout(url, timeout) {
        var controller = new AbortController();
        var timer = setTimeout(function(){ controller.abort(); }, timeout);
        return fetch(url, { signal: controller.signal }).finally(function(){ clearTimeout(timer); });
      }

      async function checkStatus() {
        setPill(apiPill, 'Checking...', null);
        setPill(chainPill, 'Checking...', null);

        // API health
        try {
          var healthResponse = await fetchWithTimeout(apiUrl + '/health', 3500);
          if (healthResponse && healthResponse.ok) {
            setPill(apiPill, 'Online', 'online');
          } else {
            setPill(apiPill, 'Offline', 'offline');
          }
        } catch (e) {
          console.error('QuantumVault API check failed:', e);
          setPill(apiPill, 'Offline', 'offline');
        }

        // Chain health: try both /status and /health endpoints
        var chainOnline = false;
        
        // Try /status endpoint first
        try {
          var chainResp = await fetchWithTimeout(chainUrl + '/status', 3500);
          if (chainResp && chainResp.ok) {
            var statusData = await chainResp.json();
            console.log('Blockchain status:', statusData);
            if (statusData && (statusData.status === 'healthy' || statusData.latest_height !== undefined)) {
              var heightText = statusData.latest_height ? ' (Height: ' + statusData.latest_height + ')' : '';
              setPill(chainPill, 'Online' + heightText, 'online');
              chainOnline = true;
            }
          }
        } catch (e) {
          console.error('Blockchain /status check failed:', e);
        }

        // Try /health endpoint as fallback
        if (!chainOnline) {
          try {
            var healthResp = await fetchWithTimeout(chainUrl + '/health', 3500);
            if (healthResp && healthResp.ok) {
              var healthData = await healthResp.json();
              console.log('Blockchain health:', healthData);
              if (healthData && (healthData.status === 'healthy' || healthData.latest_height !== undefined)) {
                var heightText = healthData.latest_height ? ' (Height: ' + healthData.latest_height + ')' : '';
                setPill(chainPill, 'Online' + heightText, 'online');
                chainOnline = true;
              }
            }
          } catch (e) {
            console.error('Blockchain /health check failed:', e);
          }
        }

        // Try API proxy as final fallback
        if (!chainOnline) {
          try {
            var apiChain = await fetchWithTimeout(apiUrl + '/blockchain/status', 3500);
            if (apiChain && apiChain.ok) {
              var info = {};
              try { info = await apiChain.json(); } catch (_) {}
              var connected = !!(info && info.blockchain && info.blockchain.connected);
              setPill(chainPill, connected ? 'Online' : 'Degraded', connected ? 'online' : 'offline');
              chainOnline = connected;
            }
          } catch (e) {
            console.error('API blockchain proxy check failed:', e);
          }
        }

        if (!chainOnline) {
          setPill(chainPill, 'Offline', 'offline');
        }
      }

      if (refreshBtn) refreshBtn.addEventListener('click', checkStatus);
      checkStatus();
    })();

    (function() {
      var anchorBtn = document.getElementById('anchorProofBtn');
      if (!anchorBtn) return;

      var anchorBadge = document.getElementById('anchorStatusBadge');
      var anchorSummary = document.getElementById('anchorSummary');
      var anchorDetails = document.getElementById('anchorDetails');
      var anchorNextBtn = document.getElementById('anchorNextBtn');
      var certificateBadge = document.getElementById('certificateStatusBadge');

      anchorBtn.addEventListener('click', async function () {
        // Require hashing step
        if (!encryptionState.encrypted || !encryptionState.hash) {
          alert('Encrypt and hash a file in Step 2 before anchoring.');
          var dot = document.querySelector('[data-carousel-dot="1"]');
          if (dot) dot.click();
          return;
        }

        var files = (window.QuantumVaultDemo.getSelectedFiles && window.QuantumVaultDemo.getSelectedFiles()) || [];
        var primary = files.length ? files[0] : null;
        var apiUrl = (window.QuantumVaultDemo && window.QuantumVaultDemo.apiUrl) || 'http://localhost:3002';

        anchorBtn.disabled = true;
        if (anchorBadge) { anchorBadge.classList.remove('is-success'); anchorBadge.classList.add('is-pending'); anchorBadge.textContent = 'Anchoring...'; }
        if (anchorSummary) anchorSummary.textContent = 'Submitting proof to QuantumVault...';

        try {
          // 1) Generate proof on API
          var genRes = await fetch(apiUrl + '/proof/generate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              blake3: encryptionState.hash,
              filename: primary ? primary.name : 'unknown',
              mime: primary ? primary.type : 'application/octet-stream',
              size: primary ? primary.size : 0,
              storageLocation: 'browser-local'
            })
          });
          if (!genRes.ok) throw new Error('Proof generation failed');
          var gen = await genRes.json();
          var proofId = gen.proofId || (gen.proof && gen.proof.id);
          if (!proofId) throw new Error('Missing proofId');
          anchorState.proofId = proofId;

          // 2) Anchor on blockchain via API
          if (anchorSummary) anchorSummary.textContent = 'Anchoring on Dytallix blockchain...';
          var anchorRes = await fetch(apiUrl + '/anchor', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ proofId: proofId })
          });
          if (!anchorRes.ok) throw new Error('Anchoring request failed');
          var anchored = await anchorRes.json();

          // Update state/UI
          anchorState.anchored = true;
          anchorState.txHash = anchored && anchored.transaction ? anchored.transaction.hash : '‚Äî';
          anchorState.block = anchored && anchored.transaction ? anchored.transaction.blockHeight : '‚Äî';
          anchorState.timestamp = anchored && anchored.transaction ? anchored.transaction.timestamp : new Date().toISOString();

          if (anchorBadge) { anchorBadge.classList.remove('is-pending'); anchorBadge.classList.add('is-success'); anchorBadge.textContent = 'Anchored'; }
          if (anchorSummary) anchorSummary.textContent = 'Proof anchored to Dytallix block #' + anchorState.block + '.';
          if (anchorDetails) anchorDetails.style.display = 'grid';
          var anchorTx = document.getElementById('anchorTxHash'); if (anchorTx) anchorTx.textContent = anchorState.txHash;
          var anchorBlockEl = document.getElementById('anchorBlock'); if (anchorBlockEl) anchorBlockEl.textContent = '#' + anchorState.block;
          var anchorTimestampEl = document.getElementById('anchorTimestamp'); if (anchorTimestampEl) anchorTimestampEl.textContent = new Date(anchorState.timestamp).toLocaleString();
          if (anchorNextBtn) anchorNextBtn.disabled = false;
          
          // De-emphasize the completed primary action
          anchorBtn.textContent = 'Anchored ‚úì';
          anchorBtn.classList.remove('btn-primary');
          anchorBtn.classList.add('btn-secondary');
          anchorBtn.disabled = true;
          
          if (certificateBadge) { certificateBadge.textContent = 'Ready to generate'; certificateBadge.classList.add('is-success'); }
        } catch (err) {
          console.error('[QuantumVault] Anchor error', err);
          if (anchorBadge) { anchorBadge.classList.remove('is-success'); anchorBadge.classList.add('is-offline'); anchorBadge.textContent = 'Failed'; }
          if (anchorSummary) anchorSummary.textContent = 'Anchoring failed: ' + err.message;
          anchorBtn.disabled = false;
        }
      });
    })();

    (function() {
      var generateBtn = document.getElementById('generateCertificateBtn');
      if (!generateBtn) return;

      var certificateOutput = document.getElementById('certificateOutput');
      var certificateDownloadBtn = document.getElementById('certificateDownloadBtn');
      var certificateNextBtn = document.getElementById('certificateNextBtn');
      var certificateBadge = document.getElementById('certificateStatusBadge');
      var verificationResult = document.getElementById('verificationResult');

      generateBtn.addEventListener('click', function() {
        if (!anchorState.anchored || !anchorState.txHash) {
          alert('Anchor the proof on-chain in Step 3 first.');
          var dot = document.querySelector('[data-carousel-dot="2"]');
          if (dot) dot.click();
          return;
        }

        if (!encryptionState.hash) {
          alert('You need to encrypt and hash a file before generating an attestation.');
          var hashDot = document.querySelector('[data-carousel-dot="1"]');
          if (hashDot) hashDot.click();
          return;
        }

        var selectedFiles = window.QuantumVaultDemo.getSelectedFiles ? window.QuantumVaultDemo.getSelectedFiles() : [];
        var primaryFile = selectedFiles && selectedFiles.length ? { name: selectedFiles[0].name, size: selectedFiles[0].size } : null;

        var certificate = {
          proofId: anchorState.proofId,
          generatedAt: new Date().toISOString(),
          cryptography: {
            hashAlgorithm: window.nobleBlake3 ? 'BLAKE3' : 'SHA-256',
            encryption: encryptionState.algorithm,
            iterations: 100000
          },
          proof: {
            hash: encryptionState.hash,
            anchorTx: anchorState.txHash,
            anchorBlock: anchorState.block,
            anchoredAt: anchorState.timestamp
          },
          file: primaryFile
        };

        certificateState.data = certificate;

        if (certificateOutput) {
          certificateOutput.textContent = JSON.stringify(certificate, null, 2);
        }
        if (certificateBadge) {
          certificateBadge.textContent = 'Attestation ready';
          certificateBadge.classList.add('is-success');
        }
        
        // De-emphasize the completed primary action
        generateBtn.textContent = 'Generated ‚úì';
        generateBtn.classList.remove('btn-primary');
        generateBtn.classList.add('btn-secondary');
        generateBtn.disabled = true;
        
        // Highlight Download JSON as the next action
        if (certificateDownloadBtn) {
          certificateDownloadBtn.disabled = false;
          certificateDownloadBtn.classList.remove('btn-secondary');
          certificateDownloadBtn.classList.add('btn-primary');
        }
        
        // Enable Continue button but keep it subtle for now
        if (certificateNextBtn) {
          certificateNextBtn.disabled = false;
          // After download or 3 seconds, make Continue more prominent
          setTimeout(function() {
            if (certificateNextBtn && !certificateNextBtn.disabled) {
              certificateNextBtn.classList.remove('btn-outline');
              certificateNextBtn.classList.add('btn-secondary', 'btn-next-action');
            }
          }, 3000);
        }
        
        if (verificationResult) {
          verificationResult.textContent = 'Attestation ready for verification';
          verificationResult.classList.remove('is-danger');
          verificationResult.classList.add('is-success');
        }
      });

      if (certificateDownloadBtn) {
        certificateDownloadBtn.addEventListener('click', function() {
          if (!certificateState.data) {
            return;
          }
          var blob = new Blob([JSON.stringify(certificateState.data, null, 2)], { type: 'application/json' });
          var link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = (certificateState.data.proofId || 'quantumvault-proof') + '.json';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          setTimeout(function() {
            URL.revokeObjectURL(link.href);
          }, 1000);
          
          // After download, make the Download button secondary and highlight Continue
          certificateDownloadBtn.classList.remove('btn-primary');
          certificateDownloadBtn.classList.add('btn-secondary');
          
          if (certificateNextBtn && !certificateNextBtn.disabled) {
            certificateNextBtn.classList.remove('btn-outline');
            certificateNextBtn.classList.add('btn-secondary', 'btn-next-action');
          }
        });
      }
    })();

    (function() {
      var runBtn = document.getElementById('runVerificationBtn');
      if (!runBtn) return;

      var certificateInput = document.getElementById('verificationCertificateInput');
      var fileInput = document.getElementById('verificationFileInput');
      var resultEl = document.getElementById('verificationResult');
      var detailsEl = document.getElementById('verificationDetails');

      runBtn.addEventListener('click', async function() {
        if (!fileInput || !fileInput.files.length) {
          alert('Select a file to verify.');
          return;
        }

        var certificateData = null;
        try {
          if (certificateInput && certificateInput.files.length) {
            var text = await certificateInput.files[0].text();
            certificateData = JSON.parse(text);
          } else if (certificateState.data) {
            certificateData = certificateState.data;
          } else {
            alert('Provide an attestation JSON to verify against.');
            return;
          }
        } catch (error) {
          console.error('Failed to parse attestation:', error);
          alert('Invalid attestation file.');
          return;
        }

        try {
          runBtn.disabled = true;
          var buffer = await fileInput.files[0].arrayBuffer();
          var computedHash = await blake3Hash(new Uint8Array(buffer));
          var expectedHash = (certificateData && certificateData.proof && (certificateData.proof.hash || certificateData.proof.blake3Hash)) || certificateData.hash || '';
          var anchorTx = certificateData && certificateData.proof ? certificateData.proof.anchorTx : null;
          var matches = expectedHash && computedHash === expectedHash;

          if (resultEl) {
            resultEl.textContent = matches ? '‚úì File integrity verified' : '‚úó Verification failed';
            resultEl.classList.remove('is-success', 'is-danger');
            resultEl.classList.add(matches ? 'is-success' : 'is-danger');
          }

          if (detailsEl) {
            detailsEl.innerHTML =
              '<div><span>Expected hash:</span> <code>' + (expectedHash || 'n/a') + '</code></div>' +
              '<div><span>Computed hash:</span> <code>' + computedHash + '</code></div>' +
              '<div><span>Anchor tx:</span> <code>' + (anchorTx || 'n/a') + '</code></div>';
          }

          if (!matches) {
            console.warn('[QuantumVault] Verification mismatch', { expectedHash: expectedHash, computedHash: computedHash });
          }
        } catch (error) {
          console.error('Verification error:', error);
          if (resultEl) {
            resultEl.textContent = '‚úó Verification failed';
            resultEl.classList.remove('is-success');
            resultEl.classList.add('is-danger');
          }
        } finally {
          runBtn.disabled = false;
        }
      });
    })();

    resetWorkflowState();

    function showArchTab(tab) {
      // Tab switching logic
      console.log('Switching to', tab, 'architecture view');
    }
    
    // File Drop Zone Functionality
    (function() {
      var dropZone = document.getElementById('fileDropZone');
      var fileInput = document.getElementById('fileInput');
      var selectedFilesList = document.getElementById('selectedFilesList');
      var filesContainer = document.getElementById('filesContainer');
      var selectedFiles = [];
      
      if (!dropZone || !fileInput) return;
      
      // Click to select files
      dropZone.addEventListener('click', function(e) {
        if (e.target.tagName !== 'BUTTON') {
          fileInput.click();
        }
      });
      
      // File input change
      fileInput.addEventListener('change', function(e) {
        handleFiles(e.target.files);
      });
      
      // Drag and drop events
      dropZone.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.add('drag-over');
      });
      
      dropZone.addEventListener('dragleave', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('drag-over');
      });
      
      dropZone.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('drag-over');
        
        var files = e.dataTransfer.files;
        handleFiles(files);
      });
      
      function handleFiles(files) {
        if (!files || files.length === 0) return;

        if (typeof window.QuantumVaultDemo.resetWorkflow === 'function') {
          window.QuantumVaultDemo.resetWorkflow();
        }

        selectedFiles = [];
        for (var i = 0; i < files.length; i++) {
          selectedFiles.push(files[i]);
        }

        renderFileList();
      }
      
      function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        var k = 1024;
        var sizes = ['Bytes', 'KB', 'MB', 'GB'];
        var i = Math.floor(Math.log(bytes) / Math.log(k));
        return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
      }
      
      function renderFileList() {
        if (selectedFiles.length === 0) {
          selectedFilesList.style.display = 'none';
          return;
        }
        
        selectedFilesList.style.display = 'block';
        filesContainer.innerHTML = '';
        
        selectedFiles.forEach(function(file, index) {
          var fileItem = document.createElement('div');
          fileItem.className = 'file-item';
          
          var fileInfo = document.createElement('div');
          fileInfo.className = 'file-item-info';
          
          var fileName = document.createElement('div');
          fileName.className = 'file-item-name';
          fileName.textContent = file.name;
          
          var fileSize = document.createElement('div');
          fileSize.className = 'file-item-size';
          fileSize.textContent = formatFileSize(file.size);
          
          var removeBtn = document.createElement('button');
          removeBtn.className = 'file-item-remove';
          removeBtn.textContent = '‚úï Remove';
          removeBtn.onclick = function(e) {
            e.stopPropagation();
            removeFile(index);
          };
          
          fileInfo.appendChild(fileName);
          fileInfo.appendChild(fileSize);
          fileItem.appendChild(fileInfo);
          fileItem.appendChild(removeBtn);
          filesContainer.appendChild(fileItem);
        });
      }
      
      function removeFile(index) {
        selectedFiles.splice(index, 1);
        renderFileList();
        if (!selectedFiles.length && typeof window.QuantumVaultDemo.resetWorkflow === 'function') {
          window.QuantumVaultDemo.resetWorkflow();
        }
      }
      
      // Expose for external access if needed
      window.QuantumVaultDemo = window.QuantumVaultDemo || {};
      window.QuantumVaultDemo.getSelectedFiles = function() {
        return selectedFiles;
      };
      window.QuantumVaultDemo.clearFiles = function() {
        selectedFiles = [];
        renderFileList();
        if (typeof window.QuantumVaultDemo.resetWorkflow === 'function') {
          window.QuantumVaultDemo.resetWorkflow();
        }
      };
    })();
    // Real BLAKE3 hash using noble-hashes library (PQC-ready)
    async function blake3Hash(data) {
      try {
        var buffer = typeof data === 'string' ? new TextEncoder().encode(data) : data;
        
        // Try to use noble-hashes BLAKE3 if available
        if (window.nobleBlake3) {
          console.log('[PQC] Using real BLAKE3 from noble-hashes');
          var hash = window.nobleBlake3(buffer);
          var hashArray = Array.from(hash);
          return hashArray.map(function(b) { return b.toString(16).padStart(2, '0'); }).join('');
        }
        
        // Fallback to SHA-256 if BLAKE3 not loaded
        console.warn('[PQC] BLAKE3 not loaded, falling back to SHA-256');
        var hashBuffer = await crypto.subtle.digest('SHA-256', buffer);
        var hashArray = Array.from(new Uint8Array(hashBuffer));
        return hashArray.map(function(b) { return b.toString(16).padStart(2, '0'); }).join('');
      } catch (error) {
        console.error('Hashing error:', error);
        throw error;
      }
    }
    
    // AES-256-GCM Encryption with PBKDF2 key derivation
    async function encryptWithPassword(data, password) {
      try {
        var salt = crypto.getRandomValues(new Uint8Array(16));
        var nonce = crypto.getRandomValues(new Uint8Array(12));
        var iterations = 100000;
        
        // Convert data to bytes
        var dataBytes = typeof data === 'string' ? new TextEncoder().encode(data) : new Uint8Array(data);
        
        // Derive key from password using PBKDF2
        var passwordBuffer = new TextEncoder().encode(password);
        var baseKey = await crypto.subtle.importKey(
          'raw',
          passwordBuffer,
          'PBKDF2',
          false,
          ['deriveKey']
        );
        
        var derivedKey = await crypto.subtle.deriveKey(
          {
            name: 'PBKDF2',
            salt: salt,
            iterations: iterations,
            hash: 'SHA-256'
          },
          baseKey,
          {
            name: 'AES-GCM',
            length: 256
          },
          false,
          ['encrypt']
        );
        
        // Encrypt data with AES-GCM
        var encryptedData = await crypto.subtle.encrypt(
          {
            name: 'AES-GCM',
            iv: nonce
          },
          derivedKey,
          dataBytes
        );
        
        return {
          ciphertext: new Uint8Array(encryptedData),
          salt: salt,
          nonce: nonce,
          iterations: iterations
        };
      } catch (error) {
        console.error('Encryption error:', error);
        throw error;
      }
    }
    
    // Format bytes to human readable
    function formatBytes(bytes) {
      if (bytes === 0) return '0 Bytes';
      var k = 1024;
      var sizes = ['Bytes', 'KB', 'MB', 'GB'];
      var i = Math.floor(Math.log(bytes) / Math.log(k));
      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
    }
    
    // Update UI progress
    function updateProgress(percent, message) {
      var statusDiv = document.getElementById('encryptionStatus');
      var progressBar = document.getElementById('encryptionProgress');
      var messageDiv = document.getElementById('encryptionMessage');
      
      if (statusDiv) statusDiv.style.display = 'block';
      if (progressBar) progressBar.style.width = percent + '%';
      if (messageDiv) messageDiv.textContent = message;
    }
    
    // Check and display PQC status
    function checkPQCStatus() {
      var pqcStatusDiv = document.getElementById('pqcAlgorithms');
      var pqcStatusBanner = document.getElementById('pqcStatus');
      var hashAlgorithmDiv = document.getElementById('hashAlgorithm');
      
      if (window.nobleBlake3) {
        if (pqcStatusDiv) pqcStatusDiv.textContent = 'BLAKE3 (Quantum-Resistant) + AES-256-GCM';
        if (hashAlgorithmDiv) hashAlgorithmDiv.textContent = 'BLAKE3 (PQC)';
        console.log('[PQC] BLAKE3 library loaded successfully - using quantum-resistant hashing');
      } else {
        if (pqcStatusDiv) pqcStatusDiv.textContent = 'SHA-256 (Classical) + AES-256-GCM';
        if (hashAlgorithmDiv) hashAlgorithmDiv.textContent = 'SHA-256 (Classical)';
        if (pqcStatusBanner) {
          pqcStatusBanner.style.background = 'rgba(250, 204, 21, 0.1)';
          pqcStatusBanner.style.borderColor = 'rgba(250, 204, 21, 0.3)';
        }
        console.warn('[PQC] BLAKE3 library not loaded - falling back to SHA-256 (not quantum-resistant)');
      }
    }
    
    // Check PQC status when page loads
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(checkPQCStatus, 500); // Wait for module imports
      });
    } else {
      setTimeout(checkPQCStatus, 500);
    }
    
    // Main encryption and hashing function
    async function performEncryptionAndHashing() {
      try {
        var files = window.QuantumVaultDemo.getSelectedFiles ? window.QuantumVaultDemo.getSelectedFiles() : [];
        if (!files || !files.length) {
          alert('Please select a file first (Step 1)');
          var dot0 = document.querySelector('[data-carousel-dot="0"]'); if (dot0) dot0.click();
          return;
        }
        var file = files[0];

        var btn = document.getElementById('encryptHashBtn');
        if (btn) btn.disabled = true;
        updateProgress(5, 'Preparing...');

        var buffer = await file.arrayBuffer();
        updateProgress(25, 'Computing BLAKE3 hash...');
        var hashHex = await blake3Hash(new Uint8Array(buffer));
        updateProgress(80, 'Finalizing...');

        // Minimal "encryption" demo (hash only for now)
        encryptionState.encrypted = true;
        encryptionState.hash = hashHex;
        encryptionState.algorithm = 'AES-256-GCM';

        var hashOutput = document.getElementById('hashOutput');
        if (hashOutput) {
          hashOutput.style.display = 'block';
          hashOutput.innerHTML = '<div style="font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-secondary);">Computed BLAKE3 hash</div>' +
                                 '<div id="hashValue" style="background: rgba(13, 22, 38, 0.6); border: 1px solid var(--surface-border); border-radius: var(--radius-md); padding: 0.5rem; font-family: monospace; font-size: 0.7rem; color: var(--primary-blue); word-break: break-all;">' + hashHex + '</div>';
        }

        var details = document.getElementById('encryptionDetails');
        if (details) {
          details.style.display = 'block';
          var hashAlgo = window.nobleBlake3 ? 'BLAKE3 (PQC-Ready)' : 'SHA-256 (Fallback)';
          details.innerHTML = '' +
            '<div><span>Algorithm</span><span>' + hashAlgo + ' + AES-256-GCM</span></div>' +
            '<div><span>File</span><span>' + (file.name || '‚Äî') + '</span></div>' +
            '<div><span>Size</span><span>' + formatBytes(file.size || 0) + '</span></div>' +
            '<div><span>Hash</span><span>' + hashHex.slice(0, 12) + '‚Ä¶</span></div>';
        }

        var nextBtn = document.getElementById('nextToAnchorBtn');
        if (nextBtn) {
          nextBtn.disabled = false;
        }
        
        // De-emphasize the completed primary action
        var encryptBtn = document.getElementById('encryptHashBtn');
        if (encryptBtn) {
          encryptBtn.textContent = 'Encrypted ‚úì';
          encryptBtn.classList.remove('btn-primary');
          encryptBtn.classList.add('btn-secondary');
          encryptBtn.disabled = true;
        }

        updateProgress(100, 'Ready to anchor');
      } catch (err) {
        console.error('Encryption/Hashing error:', err);
        alert('Failed to process file: ' + err.message);
        var btn2 = document.getElementById('encryptHashBtn'); if (btn2) btn2.disabled = false;
        updateProgress(0, '');
      }
    }
    window.performEncryptionAndHashing = performEncryptionAndHashing;
  </script>
  
  <!-- Keyframe animation for spinner -->
  <style>
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</body>
</html>
