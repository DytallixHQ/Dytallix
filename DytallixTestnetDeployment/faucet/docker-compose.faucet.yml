version: '3.9'
services:
  faucet:
    image: node:20-alpine
    working_dir: /app
    command: ["node","server/index.js"]
    volumes:
      - ./:/app:ro
    environment:
      # Networking / Chain
      RPC_HTTP_URL: ${RPC_HTTP_URL:-http://cosmos-node:26657}
      VITE_RPC_HTTP_URL: ${VITE_RPC_HTTP_URL:-http://cosmos-node:26657}
      VITE_LCD_HTTP_URL: ${VITE_LCD_HTTP_URL:-http://cosmos-node:1317}
      CHAIN_ID: ${CHAIN_ID:-dytallix-testnet-1}
      CHAIN_PREFIX: ${BECH32_PREFIX:-dyt}
      # Faucet account mnemonic
      FAUCET_MNEMONIC: ${FAUCET_MNEMONIC:?Set FAUCET_MNEMONIC}
      # Tokenomics (dual-token)
      FAUCET_MAX_PER_REQUEST_DGT: ${FAUCET_MAX_PER_REQUEST_DGT:-2}
      FAUCET_MAX_PER_REQUEST_DRT: ${FAUCET_MAX_PER_REQUEST_DRT:-50}
      FAUCET_GAS_PRICE: ${FAUCET_GAS_PRICE:-0.025uDRT}
      FAUCET_COOLDOWN_MINUTES: ${FAUCET_COOLDOWN_MINUTES:-60}
      ENABLE_SEC_HEADERS: '1'
      ENABLE_CSP: '1'
    ports:
      - "8787:8787"
    restart: unless-stopped
