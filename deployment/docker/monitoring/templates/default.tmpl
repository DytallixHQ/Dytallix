{{ define "slack.title" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] Dytallix Testnet Alert
{{ end }}

{{ define "slack.text" }}
{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Description:* {{ .Annotations.description }}
*Severity:* {{ .Labels.severity }}
*Instance:* {{ .Labels.instance }}
*Started:* {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}
{{ if .Annotations.runbook_url }}*Runbook:* {{ .Annotations.runbook_url }}{{ end }}
{{ if eq .Status "resolved" }}*Resolved:* {{ .EndsAt.Format "2006-01-02 15:04:05 UTC" }}{{ end }}
---
{{ end }}
{{ end }}

{{ define "email.subject" }}
[{{ .Status | toUpper }}] Dytallix Testnet Alert - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "email.body" }}
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .alert { border: 1px solid #ddd; margin: 10px 0; padding: 15px; }
        .critical { border-left: 5px solid #d32f2f; background-color: #ffebee; }
        .warning { border-left: 5px solid #f57c00; background-color: #fff3e0; }
        .resolved { border-left: 5px solid #388e3c; background-color: #e8f5e8; }
        .label { font-weight: bold; }
        .value { margin-left: 10px; }
    </style>
</head>
<body>
    <h2>Dytallix Testnet Alert Notification</h2>
    
    {{ if eq .Status "firing" }}
    <p><strong>Status:</strong> <span style="color: #d32f2f;">FIRING</span></p>
    {{ else }}
    <p><strong>Status:</strong> <span style="color: #388e3c;">RESOLVED</span></p>
    {{ end }}
    
    {{ range .Alerts }}
    <div class="alert {{ if eq .Labels.severity "critical" }}critical{{ else if eq .Labels.severity "warning" }}warning{{ else if eq .Status "resolved" }}resolved{{ end }}">
        <h3>{{ .Annotations.summary }}</h3>
        <p><span class="label">Description:</span> <span class="value">{{ .Annotations.description }}</span></p>
        <p><span class="label">Severity:</span> <span class="value">{{ .Labels.severity }}</span></p>
        <p><span class="label">Instance:</span> <span class="value">{{ .Labels.instance }}</span></p>
        <p><span class="label">Component:</span> <span class="value">{{ .Labels.component }}</span></p>
        <p><span class="label">Started:</span> <span class="value">{{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}</span></p>
        {{ if eq .Status "resolved" }}
        <p><span class="label">Resolved:</span> <span class="value">{{ .EndsAt.Format "2006-01-02 15:04:05 UTC" }}</span></p>
        {{ end }}
        {{ if .Annotations.runbook_url }}
        <p><span class="label">Runbook:</span> <a href="{{ .Annotations.runbook_url }}">{{ .Annotations.runbook_url }}</a></p>
        {{ end }}
    </div>
    {{ end }}
    
    <hr>
    <p><small>This alert was generated by the Dytallix Testnet monitoring system.</small></p>
</body>
</html>
{{ end }}