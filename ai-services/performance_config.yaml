# Performance Monitoring Configuration
# Configuration file for Dytallix AI Services performance optimization

performance_optimization:
  enabled: true
  version: "2.1.0"

  # Performance targets
  targets:
    cold_start_ms: 1000      # Target cold start time
    warm_response_ms: 100    # Target warm response time
    cache_hit_rate: 0.75     # Target cache hit rate
    success_rate: 0.99       # Target success rate

  # Model optimization settings
  model_optimization:
    preload_at_startup: true
    cache_models: true
    model_cache_size_mb: 512
    async_loading: true
    warmup_enabled: true

  # Inference optimization
  inference:
    enable_caching: true
    enable_batching: false    # Set to true for high-throughput scenarios
    batch_size: 8
    batch_timeout_ms: 50
    cache_ttl_seconds: 3600

  # Response optimization
  response:
    enable_compression: true
    compression_threshold_bytes: 1024
    enable_optimization: true
    float_precision: 4
    remove_null_values: true

# Caching configuration
cache:
  model_cache:
    max_size_mb: 512
    eviction_policy: "lru"

  embedding_cache:
    max_size_mb: 256
    eviction_policy: "lru"

  response_cache:
    max_size_mb: 128
    ttl_seconds: 3600
    enable_compression: true

# Monitoring and alerting
monitoring:
  enabled: true
  dashboard_enabled: true
  profiling_enabled: true

  # Performance thresholds
  thresholds:
    response_time:
      warning_ms: 100
      critical_ms: 500
    memory:
      warning_mb: 1024
      critical_mb: 2048
    cpu:
      warning_percent: 80
      critical_percent: 95
    cache_hit_rate:
      warning_threshold: 0.6
      critical_threshold: 0.4

  # Dashboard settings
  dashboard:
    refresh_interval_ms: 30000
    max_data_points: 1000
    enable_real_time: true

  # Metrics retention
  retention:
    metrics_history_size: 10000
    cleanup_interval_seconds: 3600
    max_age_hours: 24

# System configuration
system:
  # Worker pool settings
  worker_pool:
    max_workers: 4
    queue_size: 1000

  # Logging configuration
  logging:
    level: "INFO"
    enable_performance_logs: true
    log_slow_requests: true
    slow_request_threshold_ms: 100

  # Resource limits
  resources:
    max_memory_mb: 2048
    max_cpu_percent: 90
    enable_gc_optimization: true

# Testing configuration
testing:
  performance_tests:
    enabled: true
    test_endpoints:
      - "/analyze/fraud"
      - "/analyze/risk"
      - "/generate/contract"
      - "/analyze/contract"
    concurrent_requests: 10
    test_duration_seconds: 60
    warmup_requests: 5

  load_testing:
    max_concurrent: 50
    ramp_up_seconds: 30
    duration_seconds: 300

# Development settings
development:
  debug_performance: false
  enable_profiling: true
  mock_external_services: false
  detailed_timing: true