{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://dytallix.io/schemas/faucet-response.json",
  "title": "Dytallix Faucet API Response Schema",
  "description": "Schema for validating faucet API responses from the Dytallix dual-token faucet system",
  "type": "object",
  "required": ["success"],
  "properties": {
    "success": {
      "type": "boolean",
      "description": "Indicates whether the faucet request was successful"
    },
    "dispensed": {
      "type": "array",
      "description": "Array of tokens that were dispensed (only present on success)",
      "items": {
        "type": "object",
        "required": ["symbol", "amount", "txHash"],
        "properties": {
          "symbol": {
            "type": "string",
            "enum": ["DGT", "DRT"],
            "description": "Token symbol (DGT for governance, DRT for rewards)"
          },
          "amount": {
            "type": "string",
            "pattern": "^[0-9]+(\\.?[0-9]+)?$",
            "description": "Amount of tokens dispensed as a string"
          },
          "txHash": {
            "type": "string",
            "pattern": "^0x[a-fA-F0-9]{64}$",
            "description": "Transaction hash for the dispense operation"
          }
        },
        "additionalProperties": false
      }
    },
    "message": {
      "type": "string",
      "description": "Human-readable message about the operation"
    },
    "error": {
      "type": "string",
      "enum": ["INVALID_ADDRESS", "INVALID_TOKEN", "RATE_LIMIT_EXCEEDED", "SERVER_ERROR"],
      "description": "Error code (only present on failure)"
    },
    "ok": {
      "type": "boolean",
      "description": "Legacy compatibility field for single token requests"
    },
    "token": {
      "type": "string",
      "enum": ["DGT", "DRT"],
      "description": "Legacy compatibility field for single token requests"
    },
    "amount": {
      "type": "string",
      "pattern": "^[0-9]+(\\.?[0-9]+)?$",
      "description": "Legacy compatibility field for single token requests"
    },
    "txHash": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{64}$",
      "description": "Legacy compatibility field for single token requests"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "RFC3339 timestamp of the response (optional)"
    }
  },
  "if": {
    "properties": {
      "success": { "const": true }
    }
  },
  "then": {
    "required": ["success", "dispensed", "message"]
  },
  "else": {
    "required": ["success", "error", "message"]
  },
  "additionalProperties": true
}